{% extends "template.html" %}
{% block content %}
<link rel="stylesheet" type="text/css" href="static/forms.css">
<link rel="stylesheet" type="text/css" href="static/buttons.css">
<link rel="stylesheet" type="text/css" href="static/tables.css">
<p class="form_caption">New Issue</p>
<div class="form_left_container">
<form class="entry_form" action="/createissueapi" method="post">
<label for="issue_title">Issue Title</label>
<input type="text" name="issue_title" id="issue_title" required autofocus>

<label for="issue_risk_rating" class="status">Risk Rating</label>
<div class="select_wrapper">
<select name="issue_risk_rating" id="issue_risk_rating" required>
<option selected="selected"></option>
<option value="Critical">Critical</option>
<option value="High">High</option>
<option value="Medium">Medium</option>
<option value="Low">Low</option>
<option value="Info">Info</option>
</select>
</div>


<label for="issue_risk_impact" class="status">Impact</label>
<div class="select_wrapper">
<select name="issue_risk_impact" id="issue_risk_impact" required>
<option selected="selected"></option>
<option value="Critical">Critical</option>
<option value="High">High</option>
<option value="Medium">Medium</option>
<option value="Low">Low</option>
<option value="Info">Info</option>
</select>
</div>


<label for="issue_risk_likelihood" class="status">Likelihood</label>
<div class="select_wrapper">
<select name="issue_risk_likelihood" id="issue_risk_likelihood" required>
<option selected="selected"></option>
<option value="Critical">Critical</option>
<option value="High">High</option>
<option value="Medium">Medium</option>
<option value="Low">Low</option>
<option value="Info">Info</option>
</select>
</div>

<label for="issue_description">Issue Description</label>
<textarea type="text" name="issue_description" id="issue_description" required></textarea>
<label for="issue_remediation">Remediation</label>
<textarea type="text" name="issue_remediation" id="issue_remediation" required></textarea>
<label for="issue_location">Issue Location</label>
<input type="text" name="issue_location" id="issue_location" required>

<label for="issue_status" class="status">Status</label>
<div class="select_wrapper">
<select name="issue_status" id="issue_status" required>
<option selected="selected"></option>
<option value="Open">Open</option>
<option value="Risk Accepted">Risk Accepted</option>
<option value="Closed">Closed</option>
</select>
</div>

<label for="issue_notes">Issue Notes</label>
<textarea type="text" name="issue_notes" id="issue_notes"></textarea>
<label for="issue_details">Issue details</label>
<textarea type="text" name="issue_details" id="issue_details"></textarea>
<label for="linked_assets">Linked Assets</label>
<input type="text" name="linked_assets" id="linked_assets" value="{% if asset_id %}{{ asset_id }}{% else %}{% endif %}">
<input type="hidden" name="asset_id" id="asset_id" value="{{ asset_id }}">
<input type="hidden" name="engagement_id" id="engagement_id" value="{{ engagement_id }}">
<input type="hidden" name="test_id" id="test_id" value="{{ test_id }}">
<div class="button_frame">
<button class="push_button_big blue" type="submit">Log Another</button>
</div>
</form>
<div class="forms">
<form class="filter_form">
<input type="text" id="updateFilterInput" placeholder="Type to filter...">
</form>
</div>
<table id="updateTable" class="tablea">
<caption>Asset Data</caption>
<thead>
<tr>
<th scope="col">Asset ID</th>
<th scope="col">Asset Name</th>
</tr>
</thead>
<tbody>
{% for row in assets %}
<tr>
<td scope="row" data-title="issue_id">{{row['_id']}}</td>
<td data-title="asset_name">{{row['_source']['asset_stuff']['asset_name']}}</td>
</tr>
{% endfor %}
</tbody>
</table>
</div>
<script src="static/scripts.js"></script>
{% endblock %}
